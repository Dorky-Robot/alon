!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).AlonElement=e()}(this,(function(){"use strict";const t="__AlonEvent__";function e(e,n){const o=new CustomEvent(t,{detail:{...n,__alonSignalDown__:!0},bubbles:!0,cancelable:!0,composed:!0});(function(t){let e=[];function n(t){let o=t.childNodes;0===o.length?t instanceof HTMLElement&&e.push(t):o.forEach((t=>{n(t)}))}return n(t),e})(e).forEach((t=>{t.dispatchEvent(o)}))}function n(t,e){t.stopPropagation();for(const[n,o]of e.entries()){const e=n(t.detail);void 0!==e&&o.forEach((n=>n(e,t)))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var o={exports:{}};!function(t,e){t.exports=function(){function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t){return l(t)?t:i(o({stylesObject:t}))}const n="__*__";function o({stylesObject:t,parentSelector:e="",cssObject:a={},nestedSelector:i=""}){if(Array.isArray(t)){const[o,s]=t,l=`${r(o)}:${s};`,c=i?a[i]=a[i]||{}:a,u=r(e||n);c[u]=(c[u]||"")+l}else Object.keys(t).forEach((l=>{const c=t[l];if(l.startsWith("@"))o({stylesObject:c,cssObject:a,nestedSelector:l});else if("object"!=typeof c){const t=`${r(l)}:${c};`,o=i?a[i]=a[i]||{}:a,s=r(e||n);o[s]=(o[s]||"")+t}else o({stylesObject:c,parentSelector:s(e,l),cssObject:a,nestedSelector:i})}));return a}function s(t,e){if(!t)return e;const n=a(t),o=a(e);return n.map((t=>o.map((e=>`${t}${e.startsWith(":")?"":" "}${e}`)).join(","))).join(",")}function r(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function a(t){return t.split(",").map((t=>t.trim()))}function i(t){return"object"!=typeof t||Array.isArray(t)||l(t)?t:Object.entries(t).map((([t,e])=>t===n?i(e):`${t}{${i(e)}}`)).join("")}function l(t){return!t||0===Object.keys(t).length}var c={style:e};return t(c)}()}(o);var s=o.exports;const{style:r}=s,a=/\.[^.#]+/g,i=/#[^.#]+/;function l(t){let e={};return t.split(";").forEach((t=>{let[n,o]=t.split(":");n&&o&&(n=n.trim(),n=n.replace(/-./g,(t=>t.charAt(1).toUpperCase())),e[n]=o.trim())})),e}function c(t){if("string"==typeof t)return document.createTextNode(t);if(t instanceof Node)return t;const[e,...n]=t;let o,s={};if("string"!=typeof e)throw new Error("The first element of the habiscript array must be a string.");{o=e.split(/[#.]/)[0];const t=e.match(a),n=e.match(i);t&&(s.class=t.map((t=>t.substring(1))).join(" ")),n&&(s.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(s,n.shift());return function(t,e={},n){const o=document.createElement(t);for(const[t,n]of Object.entries(e))if("style"===t&&"object"==typeof n)Object.assign(o.style,n);else if("function"==typeof n&&t.startsWith("on")){const e=t.substring(2).toLowerCase();o.addEventListener(e,n)}else void 0!==n&&o.setAttribute(t,n);for(const t of n)"string"==typeof t?o.appendChild(document.createTextNode(t)):t instanceof Node?o.appendChild(t):Array.isArray(t)&&o.appendChild(c(t));return o}(o,s,n.flatMap((t=>Array.isArray(t)?c(t):t)))}var u={habiToHtml:c,htmlToHabi:function t(e){if("string"==typeof e){return t((new DOMParser).parseFromString(e,"text/html").body.firstChild)}if(e.nodeType===Node.TEXT_NODE)return e.textContent;let n=e.tagName.toLowerCase();e.id&&(n+=`#${e.id}`),e.className&&(n+=`.${e.className.split(" ").join(".")}`);const o=[n],s={};for(const t of e.attributes)"class"!==t.name&&"id"!==t.name&&("style"===t.name?s.style=l(t.value):s[t.name]=t.value);Object.keys(s).length>0&&o.push(s);for(const n of e.childNodes)o.push(t(n));return o},toElement:function(t){return c(t)},style:function(t){return this.toElement(["style",r(t)])}};class f extends HTMLElement{static _components=new Map;static get components(){return Object.fromEntries(this._components)}static selectorToHabi(t){return toHabi($(t)[0])}static toElement(t){return u.toElement(t)}static toHabi(t){return u.htmlToHabi(t)}constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static register(t){const e=this.toKebabCase(t.name);customElements.define(e,t),this._components.set(e,t)}static toKebabCase(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}isAlon(){return!0}intercept(t,e,n){!function(t,e,n,o){e.addEventListener(n,(t=>{t.preventDefault&&t.preventDefault(),o(t)}))}(0,t,e,(t=>{n(t)}))}signalUp(e){!function(e,n){e.dispatchEvent(new CustomEvent(t,{detail:{...n,__alonSignalUp__:!0},bubbles:!0,cancelable:!0,composed:!0}))}(this,e)}signalDown(t){e(this,t)}bubbling(e,o){!function(e,o,s){e.alonBubblingHandlers||(e.alonBubblingHandlers=new Map,e.addEventListener(t,(t=>{t.detail.__alonSignalDown__||n(t,e.alonBubblingHandlers)})));const r=e.alonBubblingHandlers.get(o)||[];r.push(s),e.alonBubblingHandlers.set(o,r)}(this,e,o)}capture(e,o){!function(e,o,s){e.alonCaptureHandlers||(e.alonCaptureHandlers=new Map,e.addEventListener(t,(t=>{t.detail.__alonSignalUp__||n(t,e.alonCaptureHandlers)}),!0));const r=e.alonCaptureHandlers.get(o)||[];r.push(s),e.alonCaptureHandlers.set(o,r)}(this,e,o)}html(t){return this.shadow.appendChild(u.toElement(t))}style(t){return this.shadow.appendChild(u.style(t))}}return f}));
//# sourceMappingURL=alon-element.umd.min.js.map
