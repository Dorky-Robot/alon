!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e="__AlonEvent__";function t(t,n){const s=new CustomEvent(e,{detail:{...n,__alonSignalDown__:!0},bubbles:!0,cancelable:!0,composed:!0});(function(e){let t=[];function n(e){let s=e.childNodes;0===s.length?e instanceof HTMLElement&&t.push(e):s.forEach((e=>{n(e)}))}return n(e),t})(t).forEach((e=>{e.dispatchEvent(s)}))}function n(e,t){e.stopPropagation();for(const[n,s]of t.entries()){const t=n(e.detail);void 0!==t&&s.forEach((n=>n(t,e)))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var s={exports:{}};s.exports=function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return l(e)?e:i(s({stylesObject:e}))}const n="__*__";function s({stylesObject:e,parentSelector:t="",cssObject:a={},nestedSelector:i=""}){if(Array.isArray(e)){const[s,o]=e,l=`${r(s)}:${o};`,c=i?a[i]=a[i]||{}:a,u=r(t||n);c[u]=(c[u]||"")+l}else Object.keys(e).forEach((l=>{const c=e[l];if(l.startsWith("@"))s({stylesObject:c,cssObject:a,nestedSelector:l});else if("object"!=typeof c){const e=`${r(l)}:${c};`,s=i?a[i]=a[i]||{}:a,o=r(t||n);s[o]=(s[o]||"")+e}else s({stylesObject:c,parentSelector:o(t,l),cssObject:a,nestedSelector:i})}));return a}function o(e,t){if(!e)return t;const n=a(e),s=a(t);return n.map((e=>s.map((t=>`${e}${t.startsWith(":")?"":" "}${t}`)).join(","))).join(",")}function r(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function a(e){return e.split(",").map((e=>e.trim()))}function i(e){return"object"!=typeof e||Array.isArray(e)||l(e)?e:Object.entries(e).map((([e,t])=>e===n?i(t):`${e}{${i(t)}}`)).join("")}function l(e){return!e||0===Object.keys(e).length}var c={style:t};return e(c)}();var o=s.exports;const{style:r}=o,a=/\.[^.#]+/g,i=/#[^.#]+/;function l(e){let t={};return e.split(";").forEach((e=>{let[n,s]=e.split(":");n&&s&&(n=n.trim(),n=n.replace(/-./g,(e=>e.charAt(1).toUpperCase())),t[n]=s.trim())})),t}function c(e){if("string"==typeof e)return document.createTextNode(e);if(e instanceof Node)return e;const[t,...n]=e;let s,o={};if("string"!=typeof t)throw new Error("The first element of the habiscript array must be a string.");{s=t.split(/[#.]/)[0];const e=t.match(a),n=t.match(i);e&&(o.class=e.map((e=>e.substring(1))).join(" ")),n&&(o.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(o,n.shift());return function(e,t={},n){const s=document.createElement(e);for(const[e,n]of Object.entries(t))if("style"===e&&"object"==typeof n)Object.assign(s.style,n);else if("function"==typeof n&&e.startsWith("on")){const t=e.substring(2).toLowerCase();s.addEventListener(t,n)}else void 0!==n&&s.setAttribute(e,n);for(const e of n)"string"==typeof e?s.appendChild(document.createTextNode(e)):e instanceof Node?s.appendChild(e):Array.isArray(e)&&s.appendChild(c(e));return s}(s,o,n.flatMap((e=>Array.isArray(e)?c(e):e)))}var u={habiToHtml:c,htmlToHabi:function e(t){if("string"==typeof t){return e((new DOMParser).parseFromString(t,"text/html").body.firstChild)}if(t.nodeType===Node.TEXT_NODE)return t.textContent;let n=t.tagName.toLowerCase();t.id&&(n+=`#${t.id}`),t.className&&(n+=`.${t.className.split(" ").join(".")}`);const s=[n],o={};for(const e of t.attributes)"class"!==e.name&&"id"!==e.name&&("style"===e.name?o.style=l(e.value):o[e.name]=e.value);Object.keys(o).length>0&&s.push(o);for(const n of t.childNodes)s.push(e(n));return s},toElement:function(e){return c(e)},style:function(e){return this.toElement(["style",r(e)])}};class d extends HTMLElement{static components=new Set;constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static register(e){e.name,customElements.define(e.name,e),this.components.add(e)}static toKebabCase(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}isAlon(){return!0}intercept(e,t,n){Alon.intercept(this,e,t,(e=>{n(e)}))}signalUp(t){!function(t,n){t.dispatchEvent(new CustomEvent(e,{detail:{...n,__alonSignalUp__:!0},bubbles:!0,cancelable:!0,composed:!0}))}(this,t)}signalDown(e){t(this,e)}bubbling(t,s){!function(t,s,o){t.alonBubblingHandlers||(t.alonBubblingHandlers=new Map,t.addEventListener(e,(e=>{e.detail.__alonSignalDown__||n(e,t.alonBubblingHandlers)})));const r=t.alonBubblingHandlers.get(s)||[];r.push(o),t.alonBubblingHandlers.set(s,r)}(this,t,s)}capture(t,s){!function(t,s,o){t.alonCaptureHandlers||(t.alonCaptureHandlers=new Map,t.addEventListener(e,(e=>{e.detail.__alonSignalUp__||n(e,t.alonCaptureHandlers)}),!0));const r=t.alonCaptureHandlers.get(s)||[];r.push(o),t.alonCaptureHandlers.set(s,r)}(this,t,s)}html(e){return this.shadow.appendChild(u.toElement(e))}style(e){return this.shadow.appendChild(u.style(e))}}customElements.define("alon-composer",class extends d{constructor(){super(),this.html(["div","bys"])}})}));
