const t="__AlonEvent__";function e(e,n){const s=new CustomEvent(t,{detail:{...n,__alonSignalDown__:!0},bubbles:!0,cancelable:!0,composed:!0});(function(t){let e=[];function n(t){let s=t.childNodes;0===s.length?t instanceof HTMLElement&&e.push(t):s.forEach((t=>{n(t)}))}return n(t),e})(e).forEach((t=>{t.dispatchEvent(s)}))}function n(t,e){t.stopPropagation();for(const[n,s]of e.entries()){const e=n(t.detail);void 0!==e&&s.forEach((n=>n(e,t)))}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var s={exports:{}};s.exports=function(){function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t){return l(t)?t:i(s({stylesObject:t}))}const n="__*__";function s({stylesObject:t,parentSelector:e="",cssObject:a={},nestedSelector:i=""}){if(Array.isArray(t)){const[s,o]=t,l=`${r(s)}:${o};`,c=i?a[i]=a[i]||{}:a,u=r(e||n);c[u]=(c[u]||"")+l}else Object.keys(t).forEach((l=>{const c=t[l];if(l.startsWith("@"))s({stylesObject:c,cssObject:a,nestedSelector:l});else if("object"!=typeof c){const t=`${r(l)}:${c};`,s=i?a[i]=a[i]||{}:a,o=r(e||n);s[o]=(s[o]||"")+t}else s({stylesObject:c,parentSelector:o(e,l),cssObject:a,nestedSelector:i})}));return a}function o(t,e){if(!t)return e;const n=a(t),s=a(e);return n.map((t=>s.map((e=>`${t}${e.startsWith(":")?"":" "}${e}`)).join(","))).join(",")}function r(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function a(t){return t.split(",").map((t=>t.trim()))}function i(t){return"object"!=typeof t||Array.isArray(t)||l(t)?t:Object.entries(t).map((([t,e])=>t===n?i(e):`${t}{${i(e)}}`)).join("")}function l(t){return!t||0===Object.keys(t).length}var c={style:e};return t(c)}();var o=s.exports;const{style:r}=o,a=/\.[^.#]+/g,i=/#[^.#]+/;function l(t){let e={};return t.split(";").forEach((t=>{let[n,s]=t.split(":");n&&s&&(n=n.trim(),n=n.replace(/-./g,(t=>t.charAt(1).toUpperCase())),e[n]=s.trim())})),e}function c(t){if("string"==typeof t)return document.createTextNode(t);if(t instanceof Node)return t;const[e,...n]=t;let s,o={};if("string"!=typeof e)throw new Error("The first element of the habiscript array must be a string.");{s=e.split(/[#.]/)[0];const t=e.match(a),n=e.match(i);t&&(o.class=t.map((t=>t.substring(1))).join(" ")),n&&(o.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(o,n.shift());return function(t,e={},n){const s=document.createElement(t);for(const[t,n]of Object.entries(e))if("style"===t&&"object"==typeof n)Object.assign(s.style,n);else if("function"==typeof n&&t.startsWith("on")){const e=t.substring(2).toLowerCase();s.addEventListener(e,n)}else void 0!==n&&s.setAttribute(t,n);for(const t of n)"string"==typeof t?s.appendChild(document.createTextNode(t)):t instanceof Node?s.appendChild(t):Array.isArray(t)&&s.appendChild(c(t));return s}(s,o,n.flatMap((t=>Array.isArray(t)?c(t):t)))}var u={habiToHtml:c,htmlToHabi:function t(e){if("string"==typeof e){return t((new DOMParser).parseFromString(e,"text/html").body.firstChild)}if(e.nodeType===Node.TEXT_NODE)return e.textContent;let n=e.tagName.toLowerCase();e.id&&(n+=`#${e.id}`),e.className&&(n+=`.${e.className.split(" ").join(".")}`);const s=[n],o={};for(const t of e.attributes)"class"!==t.name&&"id"!==t.name&&("style"===t.name?o.style=l(t.value):o[t.name]=t.value);Object.keys(o).length>0&&s.push(o);for(const n of e.childNodes)s.push(t(n));return s},toElement:function(t){return c(t)},style:function(t){return this.toElement(["style",r(t)])}};class AlonElement extends HTMLElement{static _components=new Map;static get components(){return Object.fromEntries(this._components)}static selectorToHabi(t){return toHabi($(t)[0])}static toElement(t){return u.toElement(t)}static toHabi(t){return u.htmlToHabi(t)}constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}static register(t){const e=this.toKebabCase(t.name);customElements.define(e,t),this._components.set(e,t)}static toKebabCase(t){return t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}isAlon(){return!0}intercept(t,e,n){!function(t,e,n,s){e.addEventListener(n,(t=>{t.preventDefault&&t.preventDefault(),s(t)}))}(0,t,e,(t=>{n(t)}))}signalUp(e){!function(e,n){e.dispatchEvent(new CustomEvent(t,{detail:{...n,__alonSignalUp__:!0},bubbles:!0,cancelable:!0,composed:!0}))}(this,e)}signalDown(t){e(this,t)}bubbling(e,s){!function(e,s,o){e.alonBubblingHandlers||(e.alonBubblingHandlers=new Map,e.addEventListener(t,(t=>{t.detail.__alonSignalDown__||n(t,e.alonBubblingHandlers)})));const r=e.alonBubblingHandlers.get(s)||[];r.push(o),e.alonBubblingHandlers.set(s,r)}(this,e,s)}capture(e,s){!function(e,s,o){e.alonCaptureHandlers||(e.alonCaptureHandlers=new Map,e.addEventListener(t,(t=>{t.detail.__alonSignalUp__||n(t,e.alonCaptureHandlers)}),!0));const r=e.alonCaptureHandlers.get(s)||[];r.push(o),e.alonCaptureHandlers.set(s,r)}(this,e,s)}html(t){return this.shadow.appendChild(u.toElement(t))}style(t){return this.shadow.appendChild(u.style(t))}}export{AlonElement as default};
//# sourceMappingURL=alon-element.esm.min.js.map
