!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Habiscript=t()}(this,(function(){"use strict";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var t={exports:{}};!function(e,t){e.exports=function(){function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){return a(e)?e:c(r({stylesObject:e}))}const n="__*__";function r({stylesObject:e,parentSelector:t="",cssObject:i={},nestedSelector:c=""}){if(Array.isArray(e)){const[r,o]=e,a=`${s(r)}:${o};`,f=c?i[c]=i[c]||{}:i,l=s(t||n);f[l]=(f[l]||"")+a}else Object.keys(e).forEach((a=>{const f=e[a];if(a.startsWith("@"))r({stylesObject:f,cssObject:i,nestedSelector:a});else if("object"!=typeof f){const e=`${s(a)}:${f};`,r=c?i[c]=i[c]||{}:i,o=s(t||n);r[o]=(r[o]||"")+e}else r({stylesObject:f,parentSelector:o(t,a),cssObject:i,nestedSelector:c})}));return i}function o(e,t){if(!e)return t;const n=i(e),r=i(t);return n.map((e=>r.map((t=>`${e}${t.startsWith(":")?"":" "}${t}`)).join(","))).join(",")}function s(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function i(e){return e.split(",").map((e=>e.trim()))}function c(e){return"object"!=typeof e||Array.isArray(e)||a(e)?e:Object.entries(e).map((([e,t])=>e===n?c(t):`${e}{${c(t)}}`)).join("")}function a(e){return!e||0===Object.keys(e).length}var f={style:t},l=e(f);return l}()}(t);var n=t.exports;const{style:r}=n,o=/\.[^.#]+/g,s=/#[^.#]+/;function i(e){let t={};return e.split(";").forEach((e=>{let[n,r]=e.split(":");n&&r&&(n=n.trim(),n=n.replace(/-./g,(e=>e.charAt(1).toUpperCase())),t[n]=r.trim())})),t}function c(e){if("string"==typeof e)return document.createTextNode(e);if(e instanceof Node)return e;const[t,...n]=e;let r,i={};if("string"!=typeof t)throw new Error("The first element of the habiscript array must be a string.");{r=t.split(/[#.]/)[0];const e=t.match(o),n=t.match(s);e&&(i.class=e.map((e=>e.substring(1))).join(" ")),n&&(i.id=n[0].substring(1))}n.length>0&&"object"==typeof n[0]&&!Array.isArray(n[0])&&Object.assign(i,n.shift());return function(e,t={},n){const r=document.createElement(e);for(const[e,n]of Object.entries(t))if("style"===e&&"object"==typeof n)Object.assign(r.style,n);else if("function"==typeof n&&e.startsWith("on")){const t=e.substring(2).toLowerCase();r.addEventListener(t,n)}else void 0!==n&&r.setAttribute(e,n);for(const e of n)"string"==typeof e?r.appendChild(document.createTextNode(e)):e instanceof Node?r.appendChild(e):Array.isArray(e)&&r.appendChild(c(e));return r}(r,i,n.flatMap((e=>Array.isArray(e)?c(e):e)))}var a={habiToHtml:c,htmlToHabi:function e(t){if("string"==typeof t){return e((new DOMParser).parseFromString(t,"text/html").body.firstChild)}if(t.nodeType===Node.TEXT_NODE)return t.textContent;let n=t.tagName.toLowerCase();t.id&&(n+=`#${t.id}`),t.className&&(n+=`.${t.className.split(" ").join(".")}`);const r=[n],o={};for(const e of t.attributes)"class"!==e.name&&"id"!==e.name&&("style"===e.name?o.style=i(e.value):o[e.name]=e.value);Object.keys(o).length>0&&r.push(o);for(const n of t.childNodes)r.push(e(n));return r},toElement:function(e){return c(e)},style:r};return e(a)}));
